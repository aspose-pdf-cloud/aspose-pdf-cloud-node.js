// Import necessary classes from the Aspose PDF Cloud library
const fs = require("fs");
const { PdfApi } = require("../src/api/api");
const { TextReplace } = require("asposepdfcloud/src/models/textReplace");
const { TextReplaceListRequest } = require("asposepdfcloud/src/models/textReplaceListRequest");

// The initialization assumes that the necessary credentials (Application ID and Application Key) from https://dashboard.aspose.cloud/
const api = new PdfApi("YOUR_API_SID", "YOUR_API_KEY");

// Set the document name
const fileName = "4pages.pdf";
// Use default storage (null indicates default storage)
const storage = null;
// Set the folder where the document is stored
const folder = "Documents";

/**
 * Delete text of a PDF document using the Aspose.PDF Cloud API.
 *
 * This function performs the following steps:
 * 1. Reads a PDF file from the local file system.
 * 2. Uploads the PDF file to the Aspose.PDF Cloud storage.
 * 3. Creates an `TextReplaceListRequest` object with the replacements list.
 * 4. Delete text of PDF document using the Aspose.PDF Cloud API.
 * 5. Logs the result to the console.
 *
 * @returns {Promise<void>} A promise that is resolves after text deletion is complete.
 */
async function postDocumentTextDelete()
{
    // Read file from file system.
    const buffer = fs.readFileSync("testData/" + fileName);
    // Upload file to cloud storage.
    const uploadResponse = await api.uploadFile(folder + "/" +fileName, buffer, storage)

    // Create TextReplace request.
    const textReplace = new TextReplace();
    // Set the text to replace.
    textReplace.oldValue = "Page";
    // Set the replacement text.
    textReplace.newValue = "";
    // Set the oldValue is regex.
    textReplace.regex = false;

    // Create TextReplaceListRequest instance.
    const textReplaceList = new TextReplaceListRequest();
    // Set the text replaces list.
    textReplaceList.textReplaces = [textReplace];
    // Set the start index of text items to replace.
    textReplaceList.startIndex = 2;
    // Set the count replacements.
    textReplaceList.countReplace = 2;

    // Swagger method for adding text: https://reference.aspose.cloud/pdf/#/TextReplace/PostDocumentTextReplace
    // Call the API to replace text in the specified PDF document.
    const result = await api.postDocumentTextReplace(
        uploadResponse.body.uploaded[0],
        textReplaceList,
        storage,
        folder);

    // Log the response to console.
    console.log(result.body.status);
}

// Execute the postDocumentTextReplace function
postDocumentTextDelete();
